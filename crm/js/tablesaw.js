!function(t){"function"==typeof define&&define.amd?define(["shoestring"],t):"object"==typeof module&&module.exports?module.exports=t():t()}(function(){var t="undefined"!=typeof window?window:this,e=t.document;function n(s,i){var r,o=typeof s;if(!s)return new a([]);if(s.call)return n.ready(s);if(s.constructor===a&&!i)return s;if("string"===o&&0===s.indexOf("<")){var l=e.createElement("div");return l.innerHTML=s,n(l).children().each(function(){l.removeChild(this)})}return"string"===o?i?n(i).find(s):(r=e.querySelectorAll(s),new a(r,s)):"[object Array]"===Object.prototype.toString.call(o)||t.NodeList&&s instanceof t.NodeList?new a(s,s):s.constructor===Array?new a(s,s):new a([s],s)}var a=function(t,e){this.length=0,this.selector=e,n.merge(this,t)};a.prototype.reverse=[].reverse,n.fn=a.prototype,n.Shoestring=a,n.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},n.merge=function(t,e){var n,a,s;for(n=+e.length,a=0,s=t.length;a<n;a++)t[s++]=e[a];return t.length=s,t},t.shoestring=n,n.fn.each=function(t){return n.each(this,t)},n.each=function(t,e){for(var n=0,a=t.length;n<a&&!1!==e.call(t[n],n,t[n]);n++);return t},n.inArray=function(t,e){for(var n=-1,a=0,s=e.length;a<s;a++)e.hasOwnProperty(a)&&e[a]===t&&(n=a);return n},n.ready=function(t){return s&&t?t.call(e):t?i.push(t):r(),[e]},n.fn.ready=function(t){return n.ready(t),this};var s=!1,i=[],r=function(){if(!s){for(;i.length;)i.shift().call(e);s=!0}};function o(t,e){var n=!1;return t.each(function(){for(var t=0;t<e.length;)this===e[t]&&(n=!0),t++}),n}(e.attachEvent?"complete"===e.readyState:"loading"!==e.readyState)?r():(e.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("readystatechange",r,!1),t.addEventListener("load",r,!1)),n.fn.is=function(t){var a,s=!1,i=this;return"string"!=typeof t?o(this,t.length&&t[0]?t:[t]):((a=this.parent()).length||(a=n(e)),a.each(function(e,n){var a;a=n.querySelectorAll(t),s=o(i,a)}),s)},n.fn.data=function(t,e){return void 0===t?this[0]?this[0].shoestringData||{}:void 0:void 0!==e?this.each(function(){this.shoestringData||(this.shoestringData={}),this.shoestringData[t]=e}):this[0]&&this[0].shoestringData?this[0].shoestringData[t]:void 0},n.fn.removeData=function(t){return this.each(function(){void 0!==t&&this.shoestringData?(this.shoestringData[t]=void 0,delete this.shoestringData[t]):this[0].shoestringData={}})},t.$=n,n.fn.addClass=function(t){var e=t.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var t=0,n=e.length;t<n;t++)void 0===this.className||""!==this.className&&this.className.match(new RegExp("(^|\\s)"+e[t]+"($|\\s)"))||(this.className+=" "+e[t])})},n.fn.add=function(t){var e=[];return this.each(function(){e.push(this)}),n(t).each(function(){e.push(this)}),n(e)},n.fn.append=function(t){return"string"!=typeof t&&void 0===t.nodeType||(t=n(t)),this.each(function(e){for(var n=0,a=t.length;n<a;n++)this.appendChild(e>0?t[n].cloneNode(!0):t[n])})},n.fn.appendTo=function(t){return this.each(function(){n(t).append(this)})},n.fn.attr=function(t,e){var n="string"==typeof t;return void 0===e&&n?this[0]?this[0].getAttribute(t):void 0:this.each(function(){if(n)this.setAttribute(t,e);else for(var a in t)t.hasOwnProperty(a)&&this.setAttribute(a,t[a])})},n.fn.before=function(t){return"string"!=typeof t&&void 0===t.nodeType||(t=n(t)),this.each(function(e){for(var n=0,a=t.length;n<a;n++)this.parentNode.insertBefore(e>0?t[n].cloneNode(!0):t[n],this)})},n.fn.children=function(){var t,e,a=[];return this.each(function(){for(t=this.children,e=-1;e++<t.length-1;)-1===n.inArray(t[e],a)&&a.push(t[e])}),n(a)},n.fn.closest=function(t){var e=[];return t?(this.each(function(){var a;if(n(a=this).is(t))e.push(this);else for(;a.parentElement;){if(n(a.parentElement).is(t)){e.push(a.parentElement);break}a=a.parentElement}}),n(e)):n(e)},n.cssExceptions={float:["cssFloat"]},function(){var e=n.cssExceptions;function a(e,n){return t.getComputedStyle(e,null).getPropertyValue(n)}var s=["","-webkit-","-ms-","-moz-","-o-","-khtml-"];n._getStyle=function(t,n){var i,r,o,l;if(e[n])for(o=0,l=e[n].length;o<l;o++)if(r=a(t,e[n][o]))return r;for(o=0,l=s.length;o<l;o++)if(r=a(t,i=(s[o]+n).replace(/\-([A-Za-z])/g,function(t,e){return e.toUpperCase()})),i!==n&&(r=r||a(t,n)),s[o]&&(r=r||a(t,s[o]+n)),r)return r}}(),function(){var t=n.cssExceptions;n._setStyle=function(e,n,a){var s=n.replace(/\-([A-Za-z])/g,function(t,e){return e.toUpperCase()});if(e.style[n]=a,s!==n&&(e.style[s]=a),t[n])for(var i=0,r=t[n].length;i<r;i++)e.style[t[n][i]]=a}}(),n.fn.css=function(t,e){if(this[0])return"object"==typeof t?this.each(function(){for(var e in t)t.hasOwnProperty(e)&&n._setStyle(this,e,t[e])}):void 0!==e?this.each(function(){n._setStyle(this,t,e)}):n._getStyle(this[0],t)},n.fn.eq=function(t){return this[t]?n(this[t]):n([])},n.fn.filter=function(t){var a=[];return this.each(function(s){var i;if("function"==typeof t)!1!==t.call(this,s)&&a.push(this);else{if(this.parentNode)i=n(t,this.parentNode);else{var r=n(e.createDocumentFragment());r[0].appendChild(this),i=n(t,r)}n.inArray(this,i)>-1&&a.push(this)}}),n(a)},n.fn.find=function(t){var e,a=[];return this.each(function(){for(var n=0,s=(e=this.querySelectorAll(t)).length;n<s;n++)a=a.concat(e[n])}),n(a)},n.fn.first=function(){return this.eq(0)},n.fn.get=function(t){if(void 0===t){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e}return this[t]};n.fn.html=function(t){if(void 0!==t)return function(t){if("string"==typeof t||"number"==typeof t)return this.each(function(){this.innerHTML=""+t});var e="";if(void 0!==t.length)for(var n=0,a=t.length;n<a;n++)e+=t[n].outerHTML;else e=t.outerHTML;return this.each(function(){this.innerHTML=e})}.call(this,t);var e="";return this.each(function(){e+=this.innerHTML}),e},function(){function t(t,e){var n,a,s;for(n=a=0;n<t.length;n++){if(e(s=t.item?t.item(n):t[n]))return a;1===s.nodeType&&a++}return-1}n.fn.index=function(a){var s;return s=this,void 0===a?t((this[0]&&this[0].parentNode||e.documentElement).childNodes,function(t){return s[0]===t}):t(s,function(t){return t===n(a,t.parentNode)[0]})}}(),n.fn.insertBefore=function(t){return this.each(function(){n(t).before(this)})},n.fn.last=function(){return this.eq(this.length-1)},n.fn.next=function(){var t=[];return this.each(function(){var e,a,s;e=n(this.parentNode)[0].childNodes;for(var i=0;i<e.length;i++){if(a=e.item(i),s&&1===a.nodeType){t.push(a);break}a===this&&(s=!0)}}),n(t)},n.fn.not=function(t){var e=[];return this.each(function(){var a=n(t,this.parentNode);-1===n.inArray(this,a)&&e.push(this)}),n(e)},n.fn.parent=function(){var t,a=[];return this.each(function(){(t=this===e.documentElement?e:this.parentNode)&&11!==t.nodeType&&a.push(t)}),n(a)},n.fn.prepend=function(t){return"string"!=typeof t&&void 0===t.nodeType||(t=n(t)),this.each(function(e){for(var n=0,a=t.length;n<a;n++){var s=e>0?t[n].cloneNode(!0):t[n];this.firstChild?this.insertBefore(s,this.firstChild):this.appendChild(s)}})},n.fn.prev=function(){var t=[];return this.each(function(){for(var e,a,s,i=(e=n(this.parentNode)[0].childNodes).length-1;i>=0;i--){if(a=e.item(i),s&&1===a.nodeType){t.push(a);break}a===this&&(s=!0)}}),n(t)},n.fn.prevAll=function(){var t=[];return this.each(function(){for(var e=n(this).prev();e.length;)t.push(e[0]),e=e.prev()}),n(t)},n.fn.removeAttr=function(t){return this.each(function(){this.removeAttribute(t)})},n.fn.removeClass=function(t){var e=t.replace(/^\s+|\s+$/g,"").split(" ");return this.each(function(){for(var t,n,a=0,s=e.length;a<s;a++)void 0!==this.className&&(n=new RegExp("(^|\\s)"+e[a]+"($|\\s)","gmi"),t=this.className.replace(n," "),this.className=t.replace(/^\s+|\s+$/g,""))})},n.fn.remove=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},n.fn.replaceWith=function(t){"string"==typeof t&&(t=n(t));var e=[];return t.length>1&&(t=t.reverse()),this.each(function(n){var a,s=this.cloneNode(!0);if(e.push(s),this.parentNode)if(1===t.length)a=n>0?t[0].cloneNode(!0):t[0],this.parentNode.replaceChild(a,this);else{for(var i=0,r=t.length;i<r;i++)a=n>0?t[i].cloneNode(!0):t[i],this.parentNode.insertBefore(a,this.nextSibling);this.parentNode.removeChild(this)}}),n(e)},n.fn.siblings=function(){if(!this.length)return n([]);var t=[],e=this[0].parentNode.firstChild;do{1===e.nodeType&&e!==this[0]&&t.push(e),e=e.nextSibling}while(e);return n(t)};var l=function(t){var e,n="",a=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=l(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[a++];)n+=l(e);return n};function c(t,e){t.shoestringData||(t.shoestringData={}),t.shoestringData.events||(t.shoestringData.events={}),t.shoestringData.loop||(t.shoestringData.loop={}),t.shoestringData.events[e]||(t.shoestringData.events[e]=[])}function h(t,e,n){var a={};a.isCustomEvent=n.isCustomEvent,a.callback=n.callfunc,a.originalCallback=n.originalCallback,a.namespace=n.namespace,t.shoestringData.events[e].push(a),n.customEventLoop&&(t.shoestringData.loop[e]=n.customEventLoop)}function f(t,e,n){var a=this.shoestringData.events[t];if(a&&a.length){var s,i,r=[];for(s=0,i=a.length;s<i;s++)e&&e!==a[s].namespace||void 0!==n&&n!==a[s].originalCallback||(this.removeEventListener(t,a[s].callback,!1),r.push(s));for(s=0,i=r.length;s<i;s++)this.shoestringData.events[t].splice(s,1)}}function u(t,e){for(var n in this.shoestringData.events)f.call(this,n,t,e)}return n.fn.text=function(){return l(this)},n.fn.val=function(t){var e;return void 0!==t?this.each(function(){if("SELECT"===this.tagName){var e,a,s,i=this.options,r=[],o=i.length;for(r[0]=t;o--;)((a=i[o]).selected=n.inArray(a.value,r)>=0)&&(e=!0,s=o);this.selectedIndex=e?s:-1}else this.value=t}):"SELECT"===(e=this[0]).tagName?e.selectedIndex<0?"":e.options[e.selectedIndex].value:e.value},n._dimension=function(t,e,n){var a;return void 0===n?(a=e.replace(/^[a-z]/,function(t){return t.toUpperCase()}),t[0]["offset"+a]):(n="string"==typeof n?n:n+"px",t.each(function(){this.style[e]=n}))},n.fn.width=function(t){return n._dimension(this,"width",t)},n.fn.wrapInner=function(t){return this.each(function(){var e=this.innerHTML;this.innerHTML="",n(this).append(n(t).html(e))})},n.fn.bind=function(t,e,n){"function"==typeof e&&(n=e,e=null);var a=t.split(" ");function s(t,a,s){var i;if(!t._namespace||t._namespace===a){t.data=e,t.namespace=t._namespace;var r=function(){return!0};t.isDefaultPrevented=function(){return!1};var o=t.preventDefault;return t.target=s||t.target||t.srcElement,t.preventDefault=o?function(){t.isDefaultPrevented=r,o.call(t)}:function(){t.isDefaultPrevented=r,t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},!1===(i=n.apply(this,[t].concat(t._args)))&&(t.preventDefault(),t.stopPropagation()),i}}return this.each(function(){for(var t,e=this,i=0,r=a.length;i<r;i++){var o=a[i].split("."),l=o[0],f=o.length>0?o[1]:null;t=function(t){return e.ssEventTrigger&&(t._namespace=e.ssEventTrigger._namespace,t._args=e.ssEventTrigger._args,e.ssEventTrigger=null),s.call(e,t,f)},null,null,c(this,l),this.addEventListener(l,t,!1),h(this,l,{callfunc:t,isCustomEvent:!1,customEventLoop:null,originalCallback:n,namespace:f})}})},n.fn.on=n.fn.bind,n.fn.unbind=function(t,e){var n=t?t.split(" "):[];return this.each(function(){if(this.shoestringData&&this.shoestringData.events)if(n.length)for(var t,a,s,i=0,r=n.length;i<r;i++)a=(t=n[i].split("."))[0],s=t.length>0?t[1]:null,a?f.call(this,a,s,e):u.call(this,s,e);else u.call(this)})},n.fn.off=n.fn.unbind,n.fn.one=function(t,e){var a=t.split(" ");return this.each(function(){for(var t,s={},i=n(this),r=0,o=a.length;r<o;r++)t=a[r],s[t]=function(t){var a=n(this);for(var i in s)a.unbind(i,s[i]);return e.apply(this,[t].concat(t._args))},i.bind(t,s[t])})},n.fn.triggerHandler=function(t,n){var a,s=t.split(" ")[0],i=this[0];if(e.createEvent&&i.shoestringData&&i.shoestringData.events&&i.shoestringData.events[s]){var r=i.shoestringData.events[s];for(var o in r)r.hasOwnProperty(o)&&((t=e.createEvent("Event")).initEvent(s,!0,!0),t._args=n,n.unshift(t),a=r[o].originalCallback.apply(t.target,n))}return a},n.fn.trigger=function(t,n){var a=t.split(" ");return this.each(function(){for(var t,s,i,r=0,o=a.length;r<o;r++){if(s=(t=a[r].split("."))[0],i=t.length>0?t[1]:null,"click"===s&&"INPUT"===this.tagName&&"checkbox"===this.type&&this.click)return this.click(),!1;if(e.createEvent){var l=e.createEvent("Event");l.initEvent(s,!0,!0),l._args=n,l._namespace=i,this.dispatchEvent(l)}}})},n}),function(t){"function"==typeof define&&define.amd?define(["shoestring"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("shoestring"):require("shoestring")(e)),t(n),n}:t(shoestring)}(function(t){"use strict";var e,n,a,s,i,r,o,l,c,h="undefined"!=typeof window?window:this,f={i18n:{modes:["Stack","Swipe","Toggle"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini};f.mustard&&t(document.documentElement).addClass("tablesaw-enhanced"),function(){var e="tablesaw-bar",n={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},a={getHeaderCells:function(){return this.$table.find("thead").children().filter("tr").eq(0).find("th")}};f.events=n;var s=function(e){if(!e)throw new Error("Tablesaw requires an element.");this.table=e,this.$table=t(e),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.init()};s.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id","tablesaw-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.trigger(n.create,[this])},s.prototype.getConfig=function(e){var n=t.extend(a,e||{});return t.extend(n,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},s.prototype._getPrimaryHeaderCells=function(){return this.getConfig().getHeaderCells.call(this)},s.prototype._findHeadersForCell=function(t){for(var e=this._getPrimaryHeaderCells(),n=[],a=1;a<this.headerMapping.length;a++)for(var s=0;s<this.headerMapping[a].length;s++)this.headerMapping[a][s]===t&&n.push(e[s]);return n},s.prototype._initCells=function(){var e=this.$table.find("tr"),n=[];e.each(function(t){n[t]=[]}),e.each(function(e){var a=0;t(this).children().each(function(){for(var t=parseInt(this.getAttribute("colspan"),10),s=parseInt(this.getAttribute("rowspan"),10);n[e][a];)a++;if(n[e][a]=this,t)for(var i=0;i<t-1;i++)a++,n[e][a]=this;if(s)for(var r=1;r<s;r++)n[e+r][a]=this;a++})});for(var a=0;a<n[0].length;a++){var s,i=n[0][a],r=0;for(i.cells||(i.cells=[]);r<n.length;)i!==(s=n[r][a])&&i.cells.push(s),r++}this.headerMapping=n},s.prototype.refresh=function(){this._initCells(),this.$table.trigger(n.refresh,[this])},s.prototype.createToolbar=function(){var n=this.$table.prev().filter("."+e);n.length||(n=t("<div>").addClass(e).insertBefore(this.$table)),this.$toolbar=n,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},s.prototype.destroy=function(){this.$table.prev().filter("."+e).each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var a=this.$table.attr("id");t(document).off("."+a),t(window).off("."+a),this.$table.trigger(n.destroy,[this]),this.$table.removeData("tablesaw")},t.fn.tablesaw=function(){return this.each(function(){var e=t(this);if(!e.data("tablesaw")){var n=new s(this);e.data("tablesaw",n)}})};var i=t(h.document);i.on("enhance.tablesaw",function(e){f.mustard&&t(e.target).find("table[data-tablesaw-mode],table[data-tablesaw-sortable]").tablesaw()});var r,o=!1;i.on("scroll.tablesaw",function(){o=!0,h.clearTimeout(r),r=h.setTimeout(function(){o=!1},300)}),i.on("resize.tablesaw",function(){o||i.trigger(n.resize)})}(),e="tablesaw-stack",n="tablesaw-cell-label",a="tablesaw-cell-content",s="tablesaw-stack",i="data-tablesaw-no-labels",r="data-tablesaw-hide-empty",(o=function(e,n){this.tablesaw=n,this.$table=t(e),this.labelless=this.$table.is("["+i+"]"),this.hideempty=this.$table.is("["+r+"]"),this.$table.data(s,this)}).prototype.init=function(){if(this.$table.addClass(e),!this.labelless){var s=this;this.$table.find("th, td").filter(function(){return!t(this).closest("thead").length}).filter(function(){return!(t(this).closest("tr").is("["+i+"]")||s.hideempty&&!t(this).html())}).each(function(){var e=[],i=t(this);t(s.tablesaw._findHeadersForCell(this)).each(function(){var n=t(this.cloneNode(!0)),a=n.find(".tablesaw-sortable-btn");n.find(".tablesaw-sortable-arrow").remove(),e.push(a.length?a.html():n.html())}),i.find("."+a).length||i.wrapInner("<span class='"+a+"'></span>");var r=i.find("."+n),o=e.join(", ");r.length?r.html()!==o&&r.html(o):i.prepend("<b class='"+n+"'>"+o+"</b>")})}},o.prototype.destroy=function(){this.$table.removeClass(e),this.$table.find("."+n).remove(),this.$table.find("."+a).each(function(){t(this).replaceWith(this.childNodes)})},t(document).on(f.events.create,function(t,e){"stack"===e.mode&&new o(e.table,e).init()}).on(f.events.refresh,function(e,n){"stack"===n.mode&&t(n.table).data(s).init()}).on(f.events.destroy,function(e,n){"stack"===n.mode&&t(n.table).data(s).destroy()}),l={_create:function(){return t(this).each(function(){t(this).trigger("beforecreate.tablesawbtn").tablesawbtn("_init").trigger("create.tablesawbtn")})},_init:function(){var e=t(this),n=this.getElementsByTagName("select")[0];return n&&t(this).addClass("btn-select").tablesawbtn("_select",n),e},_select:function(e){var n=function(e,n){var a,s,i=t(n).find("option"),r=document.createElement("span"),o=!1;if(r.setAttribute("aria-hidden","true"),r.innerHTML="&#160;",i.each(function(){this.selected&&(r.innerHTML=this.text)}),s=e.childNodes,i.length>0){for(var l=0,c=s.length;l<c;l++)(a=s[l])&&"SPAN"===a.nodeName.toUpperCase()&&(e.replaceChild(r,a),o=!0);o||e.insertBefore(r,e.firstChild)}};n(this,e),t(this).on("change refresh",function(){n(this,e)})}},t.fn.tablesawbtn=function(e,n,a,s){return this.each(function(){return e&&"string"==typeof e?t.fn.tablesawbtn.prototype[e].call(this,n,a,s):t(this).data("tablesawbtnactive")?t(this):(t(this).data("tablesawbtnactive",!0),void t.fn.tablesawbtn.prototype._create.call(this))})},t.extend(t.fn.tablesawbtn.prototype,l),function(){var e="tablesaw-coltoggle",n=function(n){this.$table=t(n),this.$table.length&&(this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"},this.headers=this.$table.find("tr").eq(0).find("th"),this.$table.data(e,this))};n.prototype.init=function(){if(this.$table.length){var e,n,a,s,i,r,o=this;this.$table.addClass(this.classes.columnToggleTable),n=(e=this.$table.attr("id"))+"-popup",r=t("<div class='"+this.classes.columnBtnContain+"'></div>"),a=t("<a href='#"+n+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+f.i18n.columnBtnText+"</span></a>"),s=t("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+n+"'></div>"),i=t("<div class='btn-group'></div>");var l,c=!1;t(this.headers).not("td").each(function(){var e=t(this),n=e.attr("data-tablesaw-priority"),a=o.$getCells(this);n&&"persist"!==n&&(a.addClass(o.classes.priorityPrefix+n),t("<label><input type='checkbox' checked>"+e.text()+"</label>").appendTo(i).children().first().data("tablesaw-header",this),c=!0)}),c||i.append("<label>"+f.i18n.columnsDialogError+"</label>"),i.appendTo(s),i.find('input[type="checkbox"]').on("change",function(t){var e=t.target.checked,n=o.$getCellsFromCheckbox(t.target);n[e?"removeClass":"addClass"]("tablesaw-cell-hidden"),n[e?"addClass":"removeClass"]("tablesaw-cell-visible"),o.$table.trigger("tablesawcolumns")}),a.appendTo(r),r.appendTo(this.$table.prev().filter("."+this.classes.toolbar)),a.on("click.tablesaw",function(n){n.preventDefault(),r.is(".visible")?h():(r.addClass("visible"),a.removeClass("down").addClass("up"),t(document).off("click."+e,h),window.clearTimeout(l),l=window.setTimeout(function(){t(document).on("click."+e,h)},15))}),s.appendTo(r),this.$menu=i,t(window).on(f.events.resize+"."+e,function(){o.refreshToggle()}),this.refreshToggle()}function h(n){n&&t(n.target).closest("."+o.classes.popup).length||(t(document).off("click."+e),a.removeClass("up").addClass("down"),r.removeClass("visible"))}},n.prototype.$getCells=function(e){return t(e).add(e.cells)},n.prototype.$getCellsFromCheckbox=function(e){var n=t(e).data("tablesaw-header");return this.$getCells(n)},n.prototype.refreshToggle=function(){var t=this;this.$menu.find("input").each(function(){this.checked="table-cell"===t.$getCellsFromCheckbox(this).eq(0).css("display")})},n.prototype.refreshPriority=function(){var e=this;t(this.headers).not("td").each(function(){var n=t(this),a=n.attr("data-tablesaw-priority"),s=n.add(this.cells);a&&"persist"!==a&&s.addClass(e.classes.priorityPrefix+a)})},n.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){t(this).removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},t(document).on(f.events.create,function(t,e){"columntoggle"===e.mode&&new n(e.table).init()}),t(document).on(f.events.destroy,function(n,a){"columntoggle"===a.mode&&t(a.table).data(e).destroy()})}(),function(){function e(e){var n=[];return t(e.childNodes).each(function(){var e=t(this);e.is("input, select")?n.push(e.val()):e.is(".tablesaw-cell-label")||n.push((e.text()||"").replace(/^\s+|\s+$/g,""))}),n.join("")}var n="tablesaw-sortable",a="data-tablesaw-sortable-default-col",s="data-tablesaw-sortable-numeric",i={head:n+"-head",ascend:n+"-ascending",descend:n+"-descending",switcher:n+"-switch",tableToolbar:"tablesaw-toolbar",sortButton:n+"-btn"},r={_create:function(e){return t(this).each(function(){if(t(this).data(n+"-init"))return!1;t(this).data(n+"-init",!0).trigger("beforecreate."+n)[n]("_init",e).trigger("create."+n)})},_init:function(){var r,o,l,c=t(this),h=function(e){t.each(e,function(e,n){var s=t(n);s.removeAttr(a),s.removeClass(i.ascend),s.removeClass(i.descend)})};c.addClass(n),r=c.find("thead th[data-"+n+"-col]"),l=r,t.each(l,function(e,n){t(n).addClass(i.head)}),function(e,n){t.each(e,function(e,a){var s=t("<button class='"+i.sortButton+"'/>");s.on("click",{col:a},n),t(a).wrapInner(s),s.append("<span class='tablesaw-sortable-arrow'>")})}(r,function(e){if(!t(e.target).is("a[href]")){e.stopPropagation();var a=t(this).parent(),s=e.data.col,l=r.index(a[0]);h(a.siblings()),a.is("."+i.descend)||!a.is("."+i.ascend)?(c[n]("sortBy",s,!0),l+="_asc"):(c[n]("sortBy",s),l+="_desc"),o&&o.find("select").val(l).trigger("refresh"),e.preventDefault()}}),function(e){t.each(e,function(e,n){var s=t(n);s.is("["+a+"]")&&(s.is("."+i.descend)||s.addClass(i.ascend))})}(r),c.is("[data-tablesaw-sortable-switch]")&&function(r){o=t("<div>").addClass(i.switcher).addClass(i.tableToolbar);var l=["<label>"+f.i18n.sort+":"];l.push('<span class="btn"><select>'),r.each(function(n){var r=t(this),o=r.is("["+a+"]"),c=r.is("."+i.descend),h=r.is("["+s+"]"),f=0;t(this.cells.slice(0,5)).each(function(){isNaN(parseInt(e(this),10))||f++});var u=5===f;h||r.attr(s,u?"":"false"),l.push("<option"+(o&&!c?" selected":"")+' value="'+n+'_asc">'+r.text()+" "+(u?"&#x2191;":"(A-Z)")+"</option>"),l.push("<option"+(o&&c?" selected":"")+' value="'+n+'_desc">'+r.text()+" "+(u?"&#x2193;":"(Z-A)")+"</option>")}),l.push("</select></span></label>"),o.html(l.join(""));var u=c.prev().filter(".tablesaw-bar"),d=u.children().eq(0);d.length?o.insertBefore(d):o.appendTo(u),o.find(".btn").tablesawbtn(),o.find("select").on("change",function(){var e=t(this).val().split("_"),a=r.eq(e[0]);h(a.siblings()),c[n]("sortBy",a.get(0),"asc"===e[1])})}(r,c.find("tbody tr:nth-child(-n+3)"))},getColumnNumber:function(e){return t(e).prevAll().length},getTableRows:function(){return t(this).find("tbody tr")},sortRows:function(n,a,i,r){var o,l;o=function(n){var s=[];return t.each(n,function(n,i){var r=t(i).children().get(a);s.push({element:r,cell:e(r),rowNum:n})}),s}(n);var c=t(r).data("tablesaw-sort");return l=!(!c||"function"!=typeof c)&&c(i)||function(t,e){var n=/[^\-\+\d\.]/g;return t?function(t,a){return e?parseFloat(t.cell.replace(n,""))-parseFloat(a.cell.replace(n,"")):t.cell.toLowerCase()>a.cell.toLowerCase()?1:-1}:function(t,a){return e?parseFloat(a.cell.replace(n,""))-parseFloat(t.cell.replace(n,"")):t.cell.toLowerCase()<a.cell.toLowerCase()?1:-1}}(i,t(r).is("["+s+"]")&&!t(r).is("["+s+'="false"]')),n=function(t,e){var n,a,s,i=[];for(n=0,a=t.length;n<a;n++)s=t[n].rowNum,i.push(e[s]);return i}(o.sort(l),n)},replaceTableRows:function(e){for(var n=t(this).find("tbody"),a=0,s=e.length;a<s;a++)n.append(e[a])},makeColDefault:function(e,n){var s=t(e);s.attr(a,"true"),n?(s.removeClass(i.descend),s.addClass(i.ascend)):(s.removeClass(i.ascend),s.addClass(i.descend))},sortBy:function(e,a){var s,i,r=t(this);s=r[n]("getColumnNumber",e),i=r[n]("getTableRows"),i=r[n]("sortRows",i,s,a,e),r[n]("replaceTableRows",i),r[n]("makeColDefault",e,a),r.trigger("tablesaw-sorted")}};t.fn[n]=function(e){var a,s=Array.prototype.slice.call(arguments,1);return e&&"string"==typeof e?void 0!==(a=t.fn[n].prototype[e].apply(this[0],s))?a:t(this):(t(this).data(n+"-active")||(t(this).data(n+"-active",!0),t.fn[n].prototype._create.call(this,e)),t(this))},t.extend(t.fn[n].prototype,r),t(document).on(f.events.create,function(t,e){e.$table.is("table[data-tablesaw-sortable]")&&e.$table[n]()})}(),function(){var e={toolbar:"tablesaw-bar",hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",allColumnsVisible:"tablesaw-all-cols-visible"},n={disableTouchEvents:"data-tablesaw-no-touch"};function a(a,s){var i=t("<div class='tablesaw-advance'></div>"),r=t("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(i),o=t("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(i),l=a._getPrimaryHeaderCells(),c=l.not('[data-tablesaw-priority="persist"]'),u=[],d=t(document.head||"head"),p=s.attr("id");if(!l.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");function v(e){return t(e.cells).add(e)}function b(t){v(t).removeClass("tablesaw-cell-hidden")}function g(t){v(t).addClass("tablesaw-cell-hidden")}function m(){var n,a="#"+p+".tablesaw-swipe ",i=[],r=s.width(),o=[];if(l.each(function(e){var n;t(this).is('[data-tablesaw-priority="persist"]')&&(n=this.offsetWidth)<.75*r&&(o.push(e+"-"+n),i.push(a+" .tablesaw-cell-persist:nth-child("+(e+1)+") { width: "+n+"px; }"))}),n=o.join("_"),i.length){s.addClass(e.persistWidths);var c=t("#"+p+"-persist");c.length&&c.data("tablesaw-hash")===n||(c.remove(),t("<style>"+i.join("\n")+"</style>").attr("id",p+"-persist").data("tablesaw-hash",n).appendTo(d))}}function w(){var e,n=[];return c.each(function(a){var s=t(this),i="none"===s.css("display")||s.is(".tablesaw-cell-hidden");if(i||e){if(i&&e)return n[1]=a,!1}else e=!0,n[0]=a}),n}function y(){var t=w();return[t[1]-1,t[0]-1]}function C(t){return t[1]>-1&&t[1]<c.length}function T(){if(!(n=s.attr("data-tablesaw-swipe-media"))||"matchMedia"in h&&h.matchMedia(n).matches){var n,a=s.parent().width(),i=[],r=0,o=[],c=l.length;l.each(function(e){var n=t(this).is('[data-tablesaw-priority="persist"]');i.push(n),r+=u[e],o.push(r),(n||r>a)&&c--});var f=0===c;l.each(function(t){i[t]?v(this).addClass("tablesaw-cell-persist"):o[t]<=a||f?(f=!1,b(this)):g(this)}),s.removeClass(e.persistWidths),t("#"+p+"-persist").remove(),s.trigger("tablesawcolumns")}}function N(t){var e=function(t){return t?w():y()}(t);C(e)&&(isNaN(e[0])&&(e[0]=t?0:c.length-1),m(),g(c.get(e[0])),b(c.get(e[1])),s.trigger("tablesawcolumns"))}function $(t,e){return(t.touches||t.originalEvent.touches)[0][e]}s.addClass("tablesaw-swipe"),l.each(function(){var t=this.offsetWidth;u.push(t)}),i.appendTo(s.prev().filter(".tablesaw-bar")),p||(p="tableswipe-"+Math.round(1e4*Math.random()),s.attr("id",p)),r.add(o).on("click",function(e){N(!!t(e.target).closest(o).length),e.preventDefault()}),s.is("["+n.disableTouchEvents+"]")||s.on("touchstart.swipetoggle",function(e){var n,s,i=$(e,"pageX"),r=$(e,"pageY"),o=window.pageYOffset;t(h).off(f.events.resize,T),t(this).on("touchmove.swipetoggle",function(t){n=$(t,"pageX"),s=$(t,"pageY")}).on("touchend.swipetoggle",function(){var e=a.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),l=e.swipe?e.swipe.verticalThreshold:e.swipeVerticalThreshold,c=e.swipe?e.swipe.horizontalThreshold:e.swipeHorizontalThreshold,u=Math.abs(window.pageYOffset-o)>=l;Math.abs(s-r)>=l||u||(n-i<-1*c&&N(!0),n-i>c&&N(!1)),window.setTimeout(function(){t(h).on(f.events.resize,T)},300),t(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),s.on("tablesawcolumns.swipetoggle",function(){var t=C(y()),n=C(w());r[t?"removeClass":"addClass"](e.hideBtn),o[n?"removeClass":"addClass"](e.hideBtn),r.closest("."+e.toolbar)[t||n?"removeClass":"addClass"](e.allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){N(!0)}).on("tablesawprev.swipetoggle",function(){N(!1)}).on(f.events.destroy+".swipetoggle",function(){var e=t(this);e.removeClass("tablesaw-swipe"),e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),t(h).off(f.events.resize,T),e.off(".swipetoggle")}).on(f.events.refresh,function(){u=[],l.each(function(){var t=this.offsetWidth;u.push(t)}),T()}),T(),t(h).on(f.events.resize,T)}t(document).on(f.events.create,function(t,e){"swipe"===e.mode&&a(e,e.$table)})}(),function(){var e={attr:{init:"data-tablesaw-minimap"}};function n(n){var a=t('<div class="tablesaw-advance minimap">'),s=t('<ul class="tablesaw-advance-dots">').appendTo(a),i="tablesaw-advance-dots-hide";function r(){if(function(t){var n=t.attr(e.attr.init);return!n||h.matchMedia&&h.matchMedia(n).matches}(n)){a.css("display","block");var r=s.find("li").removeClass(i);n.find("thead th").each(function(e){"none"===t(this).css("display")&&r.eq(e).addClass(i)})}else a.css("display","none")}n.find("thead th").each(function(){s.append("<li><i></i></li>")}),a.appendTo(n.prev().filter(".tablesaw-bar")),r(),t(h).on(f.events.resize,r),n.on("tablesawcolumns.minimap",function(){r()}).on(f.events.destroy+".minimap",function(){var e=t(this);e.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),t(h).off(f.events.resize,r),e.off(".minimap")})}t(document).on(f.events.create,function(t,a){"swipe"!==a.mode&&"columntoggle"!==a.mode||!a.$table.is("[ "+e.attr.init+"]")||n(a.$table)})}(),c={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["stack","swipe","columntoggle"],init:function(e){var n,a=t(e),s=a.attr(c.attributes.excludeMode),i=a.prev().filter(".tablesaw-bar"),r=t("<div>").addClass(c.classes.main+" "+c.classes.toolbar),o=["<label>"+f.i18n.columns+":"],l=a.attr("data-tablesaw-mode");o.push('<span class="btn"><select>');for(var h=0,u=c.modes.length;h<u;h++)s&&s.toLowerCase()===c.modes[h]||((n=l===c.modes[h])&&c.modes[h],o.push("<option"+(n?" selected":"")+' value="'+c.modes[h]+'">'+f.i18n.modes[h]+"</option>"));o.push("</select></span></label>"),r.html(o.join(""));var d=i.find(".tablesaw-advance").eq(0);d.length?r.insertBefore(d):r.appendTo(i),r.find(".btn").tablesawbtn(),r.find("select").on("change",c.onModeChange)},onModeChange:function(){var e=t(this),n=e.closest("."+c.classes.main),a=e.closest(".tablesaw-bar").next().eq(0),s=e.val();n.remove(),a.data("tablesaw").destroy(),a.attr("data-tablesaw-mode",s),a.tablesaw()}},t(h.document).on(f.events.create,function(t,e){e.$table.is(c.selectors.init)&&c.init(e.table)})});